<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>maggen: src/Builders/Builder_plans.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>src/Builders/Builder_plans.cpp</h1><a href="Builder__plans_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;limits.h&gt;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;boost/graph/topological_sort.hpp&gt;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &lt;boost/graph/transitive_closure.hpp&gt;</span>
<a name="l00013"></a>00013 
<a name="l00014"></a>00014 <span class="preprocessor">#include &quot;../../include/Builders/Builder_plans.h&quot;</span>
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="preprocessor">#include &quot;../../include/Util/Utilities.h&quot;</span>
<a name="l00017"></a>00017 
<a name="l00018"></a>00018 <span class="keyword">using namespace </span>std;
<a name="l00019"></a>00019 <span class="keyword">using namespace </span>boost;
<a name="l00020"></a>00020 <span class="keyword">using namespace </span>utilities;
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="keyword">namespace </span>genevalmag
<a name="l00023"></a>00023 {
<a name="l00024"></a>00024 
<a name="l00028"></a>00028 <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="namespacegenevalmag.html#a605c56dc4a9a367c9da7c7759c7f6b65">PATH_OUT_PLAN</a>(<span class="stringliteral">&quot;plans/&quot;</span>);
<a name="l00029"></a>00029 <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="namespacegenevalmag.html#a345f3ac168618479f16dbd899562685e">PATH_OUT_PLAN_PROJECT</a>(<span class="stringliteral">&quot;plans_project/&quot;</span>);
<a name="l00030"></a>00030 
<a name="l00034"></a><a class="code" href="classgenevalmag_1_1Builder__plans.html#abd168919b4dfc51ed9c400f5afac0043">00034</a> <a class="code" href="classgenevalmag_1_1Builder__plans.html#abd168919b4dfc51ed9c400f5afac0043">Builder_plans::Builder_plans</a>(<span class="keyword">const</span> <a class="code" href="classgenevalmag_1_1Attr__grammar.html">Attr_grammar</a> &amp;attribute_grammar):
<a name="l00035"></a>00035         <a class="code" href="namespacegenevalmag.html#a85aabf29d2f206619e2d128154283336">attr_grammar</a>(attribute_grammar),
<a name="l00036"></a>00036         build_graphs(attribute_grammar)
<a name="l00037"></a>00037 {
<a name="l00038"></a>00038 }
<a name="l00039"></a>00039 
<a name="l00043"></a><a class="code" href="classgenevalmag_1_1Builder__plans.html#af19ca3bf57580ee40b317e119cacdc66">00043</a> <a class="code" href="classgenevalmag_1_1Builder__plans.html#af19ca3bf57580ee40b317e119cacdc66">Builder_plans::~Builder_plans</a>()
<a name="l00044"></a>00044 {
<a name="l00045"></a>00045 }
<a name="l00046"></a>00046 
<a name="l00050"></a><a class="code" href="classgenevalmag_1_1Builder__plans.html#a3b70a30427aa135641a75d0d42e23500">00050</a> <span class="keywordtype">void</span> <a class="code" href="classgenevalmag_1_1Builder__plans.html#a3b70a30427aa135641a75d0d42e23500">Builder_plans::save_all_graphs</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> path_output)<span class="keyword"> const</span>
<a name="l00051"></a>00051 <span class="keyword"></span>{
<a name="l00052"></a>00052         <a class="code" href="classgenevalmag_1_1Builder__plans.html#ac1d890f07dc50cc1d7383a73bb5bb5af" title="Stores all graphs DP, DOWN, DCG and ADP, generated for the grammar&amp;#39;s analisys...">build_graphs</a>.<a class="code" href="classgenevalmag_1_1Builder__graphs.html#a95525c606a1189a5fe0096f72938555d">save_all_graphs</a>(path_output);
<a name="l00053"></a>00053 }
<a name="l00054"></a>00054 
<a name="l00058"></a><a class="code" href="classgenevalmag_1_1Builder__plans.html#ac9502627f9433c4cab7d03678e507a66">00058</a> <span class="keywordtype">void</span> <a class="code" href="classgenevalmag_1_1Builder__plans.html#ac9502627f9433c4cab7d03678e507a66">Builder_plans::save_cyclic_graphs</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> path_output)<span class="keyword"> const</span>
<a name="l00059"></a>00059 <span class="keyword"></span>{
<a name="l00060"></a>00060         <a class="code" href="classgenevalmag_1_1Builder__plans.html#ac1d890f07dc50cc1d7383a73bb5bb5af" title="Stores all graphs DP, DOWN, DCG and ADP, generated for the grammar&amp;#39;s analisys...">build_graphs</a>.<a class="code" href="classgenevalmag_1_1Builder__graphs.html#a81bf79709c133320f4d40cdee1f61466">save_cyclic_graphs</a>(path_output);
<a name="l00061"></a>00061 }
<a name="l00062"></a>00062 
<a name="l00066"></a><a class="code" href="classgenevalmag_1_1Builder__plans.html#a9552dcef13af0de0f3f2ff59a330d15c">00066</a> <span class="keywordtype">bool</span> <a class="code" href="classgenevalmag_1_1Builder__plans.html#a9552dcef13af0de0f3f2ff59a330d15c">Builder_plans::generate_graphs</a>()
<a name="l00067"></a>00067 {
<a name="l00068"></a>00068         <span class="keywordflow">if</span>(<a class="code" href="classgenevalmag_1_1Builder__plans.html#ac1d890f07dc50cc1d7383a73bb5bb5af" title="Stores all graphs DP, DOWN, DCG and ADP, generated for the grammar&amp;#39;s analisys...">build_graphs</a>.<a class="code" href="classgenevalmag_1_1Builder__graphs.html#acd8de1287317a25e559f4aede929fe66">compute_dependency_graphs</a>())
<a name="l00069"></a>00069         {
<a name="l00070"></a>00070                 <span class="keywordflow">if</span>(<a class="code" href="classgenevalmag_1_1Builder__plans.html#ac1d890f07dc50cc1d7383a73bb5bb5af" title="Stores all graphs DP, DOWN, DCG and ADP, generated for the grammar&amp;#39;s analisys...">build_graphs</a>.<a class="code" href="classgenevalmag_1_1Builder__graphs.html#adc8ee86b8d769a7b42c43361fa7076cb">compute_down_graph</a>())
<a name="l00071"></a>00071                 {
<a name="l00072"></a>00072                         <span class="keywordflow">if</span>(<a class="code" href="classgenevalmag_1_1Builder__plans.html#ac1d890f07dc50cc1d7383a73bb5bb5af" title="Stores all graphs DP, DOWN, DCG and ADP, generated for the grammar&amp;#39;s analisys...">build_graphs</a>.<a class="code" href="classgenevalmag_1_1Builder__graphs.html#af41d4e9683653a0d47fa45406a2ca594">compute_dcg</a>())
<a name="l00073"></a>00073                         {
<a name="l00074"></a>00074                                 <span class="keywordflow">if</span>(<a class="code" href="classgenevalmag_1_1Builder__plans.html#ac1d890f07dc50cc1d7383a73bb5bb5af" title="Stores all graphs DP, DOWN, DCG and ADP, generated for the grammar&amp;#39;s analisys...">build_graphs</a>.<a class="code" href="classgenevalmag_1_1Builder__graphs.html#a497bbd54a1f3197e22743dcf2ad27da3">compute_adp_graph</a>())
<a name="l00075"></a>00075                                 {
<a name="l00076"></a>00076                                         cout &lt;&lt; <span class="stringliteral">&quot;* Generation graphs -------- [  OK  ]&quot;</span> &lt;&lt; endl;
<a name="l00077"></a>00077                                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00078"></a>00078                                 }
<a name="l00079"></a>00079                         }
<a name="l00080"></a>00080                 }
<a name="l00081"></a>00081         }
<a name="l00082"></a>00082         cout &lt;&lt; <span class="stringliteral">&quot;* Generation graphs -------- [ FAIL ]\n&quot;</span> &lt;&lt; endl;
<a name="l00083"></a>00083         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00084"></a>00084 }
<a name="l00085"></a>00085 
<a name="l00090"></a><a class="code" href="classgenevalmag_1_1Builder__plans.html#a9293c2318f2a323616fc49505a44e4e3">00090</a> <span class="keywordtype">void</span> <a class="code" href="classgenevalmag_1_1Builder__plans.html#a9293c2318f2a323616fc49505a44e4e3">Builder_plans::generates_topological_order</a>(<span class="keyword">const</span> <a class="code" href="namespacegenevalmag.html#a4a96de9ebfc7d48233406ab9cad55cb5">Graph</a> &amp;graph, <a class="code" href="namespacegenevalmag.html#a0bb2e8b0fa1b07b873f0363719de7b64">Order_eval_eq</a> &amp;result_order, <span class="keyword">const</span> <a class="code" href="structgenevalmag_1_1c__rule.html">Context_rule</a> &amp;context_rule)<span class="keyword"> const</span>
<a name="l00091"></a>00091 <span class="keyword"></span>{
<a name="l00092"></a>00092         <span class="keyword">typedef</span> std::list&lt;Vertex&gt; MakeOrder;
<a name="l00093"></a>00093         MakeOrder make_order;
<a name="l00094"></a>00094 
<a name="l00095"></a>00095         <span class="comment">/* Function of library boost. Topological order.  */</span>
<a name="l00096"></a>00096         topological_sort(graph, std::front_inserter(make_order));
<a name="l00097"></a>00097 
<a name="l00098"></a>00098         <span class="comment">/* Creates result_order with &quot;make_order&quot; */</span>
<a name="l00099"></a>00099         property_map&lt;Graph, vertex_data_t&gt;::const_type prop(<span class="keyword">get</span>(<a class="code" href="structgenevalmag_1_1vertex__data__t.html">vertex_data_t</a>(), graph));
<a name="l00100"></a>00100 
<a name="l00101"></a>00101         <span class="comment">/* Cycles over make_oder for save the id_equation in result_order. */</span>
<a name="l00102"></a>00102         <span class="keywordflow">for</span> (MakeOrder::iterator i(make_order.begin()); i != make_order.end(); ++i)
<a name="l00103"></a>00103         {
<a name="l00104"></a>00104                 <span class="keyword">const</span> <a class="code" href="classgenevalmag_1_1Expr__instance.html">Expr_instance</a>* ins(dynamic_cast&lt;const Expr_instance*&gt;(prop[*i]));
<a name="l00105"></a>00105                 <span class="keywordflow">if</span> (ins)
<a name="l00106"></a>00106                 <span class="comment">/* For the equation&#39;s order only interests the instances. */</span>
<a name="l00107"></a>00107                 {
<a name="l00108"></a>00108                         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> index;
<a name="l00109"></a>00109                         <span class="keywordflow">if</span> (ins-&gt;<a class="code" href="classgenevalmag_1_1Expr__instance.html#a18d92b87a30dbf2ca3833e075f76d52e">get_attr</a>()-&gt;<a class="code" href="classgenevalmag_1_1Attribute.html#a1943bd98897321547a21177d4efcf302">is_inherit</a>() &amp;&amp; ins-&gt;<a class="code" href="classgenevalmag_1_1Expr__instance.html#a5327a138bd6dc934ce89d878d973bfb0">get_symb</a>()-&gt;<a class="code" href="classgenevalmag_1_1Symbol.html#a17e303be01f4c9cd3c1b167179d6e0aa">equals</a>(*<a class="code" href="classgenevalmag_1_1Builder__plans.html#a247759aafc18133de19c8c95afb9c2d5" title="References to the attribute grammar.">attr_grammar</a>.<a class="code" href="classgenevalmag_1_1Attr__grammar.html#a3452d5ee579a9985a52edcf6a97678d5">get_rule</a>(context_rule.<a class="code" href="structgenevalmag_1_1c__rule.html#af0b0004a1f307e5cb18ed26d3e983f1d" title="Indexs contexts inferior (rules).">context</a>[0]).<a class="code" href="classgenevalmag_1_1Rule.html#a4d67205ef292350a440a10f7bbdda0e1">get_left_symbol</a>()))
<a name="l00110"></a>00110                         <span class="comment">/* The instance is a inherit of left-symbol rule.</span>
<a name="l00111"></a>00111 <span class="comment">                         * The instance searchs in the superior context of rule. */</span>
<a name="l00112"></a>00112                         {
<a name="l00113"></a>00113                                 vector&lt;unsigned short&gt; context_father;
<a name="l00114"></a>00114                                 context_father.push_back(context_rule.<a class="code" href="structgenevalmag_1_1c__rule.html#abe7fed1600af3652ab298ac2a897b18f" title="Index context father (rule).">father</a>);
<a name="l00115"></a>00115                                 index = (<a class="code" href="classgenevalmag_1_1Builder__plans.html#a247759aafc18133de19c8c95afb9c2d5" title="References to the attribute grammar.">attr_grammar</a>.<a class="code" href="classgenevalmag_1_1Attr__grammar.html#a47242caf1e804a8fc50e0ab75ea39570">get_index_eq_with_context</a>(ins, context_father));
<a name="l00116"></a>00116                         }
<a name="l00117"></a>00117                         <span class="keywordflow">else</span>
<a name="l00118"></a>00118                         <span class="comment">/* The instance is a inherit of right-symbol rule or syntetize of left-symbol.</span>
<a name="l00119"></a>00119 <span class="comment">                         * The instance searchs in the context of rule. */</span>
<a name="l00120"></a>00120                         {
<a name="l00121"></a>00121                                 index = (<a class="code" href="classgenevalmag_1_1Builder__plans.html#a247759aafc18133de19c8c95afb9c2d5" title="References to the attribute grammar.">attr_grammar</a>.<a class="code" href="classgenevalmag_1_1Attr__grammar.html#a47242caf1e804a8fc50e0ab75ea39570">get_index_eq_with_context</a>(ins, context_rule.<a class="code" href="structgenevalmag_1_1c__rule.html#af0b0004a1f307e5cb18ed26d3e983f1d" title="Indexs contexts inferior (rules).">context</a>));
<a name="l00122"></a>00122                         }
<a name="l00123"></a>00123 
<a name="l00124"></a>00124                         assert (index &gt; 0);
<a name="l00125"></a>00125                         result_order.push_back(index);
<a name="l00126"></a>00126                 }
<a name="l00127"></a>00127         }
<a name="l00128"></a>00128 }
<a name="l00129"></a>00129 
<a name="l00134"></a><a class="code" href="classgenevalmag_1_1Builder__plans.html#a86e05ee91d27e62d16d77ecbdec05bf7">00134</a> <a class="code" href="namespacegenevalmag.html#a0bb2e8b0fa1b07b873f0363719de7b64">Order_eval_eq</a> <a class="code" href="classgenevalmag_1_1Builder__plans.html#a86e05ee91d27e62d16d77ecbdec05bf7">Builder_plans::compute_order</a>(<span class="keyword">const</span> <a class="code" href="namespacegenevalmag.html#a4a96de9ebfc7d48233406ab9cad55cb5">Graph</a> &amp;graph_adp, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> index_order, <span class="keyword">const</span> <a class="code" href="structgenevalmag_1_1c__rule.html">Context_rule</a> &amp;context_rule)
<a name="l00135"></a>00135 {
<a name="l00136"></a>00136         <a class="code" href="namespacegenevalmag.html#a4a96de9ebfc7d48233406ab9cad55cb5">Graph</a> graph(graph_adp);
<a name="l00137"></a>00137         <span class="keyword">const</span> <a class="code" href="namespacegenevalmag.html#a0bb2e8b0fa1b07b873f0363719de7b64">Order_eval_eq</a> &amp;order_eq(<a class="code" href="classgenevalmag_1_1Builder__plans.html#a6a64fd58a3ce6c2f4b6c69df14ffee6e">plans_project_uniques</a>[index_order]);
<a name="l00138"></a>00138         <span class="comment">/* Creates edges with the elem of order_eq</span>
<a name="l00139"></a>00139 <span class="comment">         * Ex: Order_eq = 2, 5, 6.</span>
<a name="l00140"></a>00140 <span class="comment">         *  Edges : (2,5), (5,6) */</span>
<a name="l00141"></a>00141         <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i(1); i &lt; order_eq.size(); i++)
<a name="l00142"></a>00142         {
<a name="l00143"></a>00143                 property_map&lt;Graph, vertex_data_t&gt;::type prop(<span class="keyword">get</span>(<a class="code" href="structgenevalmag_1_1vertex__data__t.html">vertex_data_t</a>(), graph));
<a name="l00144"></a>00144                 <span class="comment">/* Obtain v1 */</span>
<a name="l00145"></a>00145                 <span class="keyword">const</span> <a class="code" href="classgenevalmag_1_1Expr__instance.html">Expr_instance</a> *ins1(<a class="code" href="classgenevalmag_1_1Builder__plans.html#a247759aafc18133de19c8c95afb9c2d5" title="References to the attribute grammar.">attr_grammar</a>.<a class="code" href="classgenevalmag_1_1Attr__grammar.html#a9d743d32f7ecb1f31284d04db9e3051e">get_eq_l_value</a>(order_eq[i-1]));
<a name="l00146"></a>00146                 assert(ins1 != NULL);
<a name="l00147"></a>00147                 <a class="code" href="namespacegenevalmag.html#a2aae7b018fc2a9afae131bbf639181b5">Vertex</a> v1(<a class="code" href="namespaceutilities.html#a13764073c6966781a6680ab58d88c1b5">return_vertex</a>(graph, ins1));
<a name="l00148"></a>00148                 assert(v1 != USHRT_MAX);
<a name="l00149"></a>00149 
<a name="l00150"></a>00150                 <span class="comment">/* Obtain v2 */</span>
<a name="l00151"></a>00151                 <span class="keyword">const</span> <a class="code" href="classgenevalmag_1_1Expr__instance.html">Expr_instance</a> *ins2(<a class="code" href="classgenevalmag_1_1Builder__plans.html#a247759aafc18133de19c8c95afb9c2d5" title="References to the attribute grammar.">attr_grammar</a>.<a class="code" href="classgenevalmag_1_1Attr__grammar.html#a9d743d32f7ecb1f31284d04db9e3051e">get_eq_l_value</a>(order_eq[i]));
<a name="l00152"></a>00152                 assert(ins2 != NULL);
<a name="l00153"></a>00153                 <a class="code" href="namespacegenevalmag.html#a2aae7b018fc2a9afae131bbf639181b5">Vertex</a> v2(<a class="code" href="namespaceutilities.html#a13764073c6966781a6680ab58d88c1b5">return_vertex</a>(graph, ins2));
<a name="l00154"></a>00154                 assert(v2 != USHRT_MAX);
<a name="l00155"></a>00155 
<a name="l00156"></a>00156                 add_edge(v1, v2, graph);
<a name="l00157"></a>00157         }
<a name="l00158"></a>00158         <span class="comment">/* Applies transitive function over graph. */</span>
<a name="l00159"></a>00159 <span class="comment">//      warshall_transitive_closure(graph);</span>
<a name="l00160"></a>00160 
<a name="l00161"></a>00161         <a class="code" href="namespacegenevalmag.html#a0bb2e8b0fa1b07b873f0363719de7b64">Order_eval_eq</a> result;
<a name="l00162"></a>00162         <span class="comment">/* Applies topological order over graph. */</span>
<a name="l00163"></a>00163         <a class="code" href="classgenevalmag_1_1Builder__plans.html#a9293c2318f2a323616fc49505a44e4e3">generates_topological_order</a>(graph, result, context_rule);
<a name="l00164"></a>00164 
<a name="l00165"></a>00165         <span class="keywordflow">return</span> result;
<a name="l00166"></a>00166 }
<a name="l00167"></a>00167 
<a name="l00171"></a><a class="code" href="classgenevalmag_1_1Builder__plans.html#aa15ea4156613c75cfca5ecc0bd6a5193">00171</a> <span class="keywordtype">bool</span> <a class="code" href="classgenevalmag_1_1Builder__plans.html#aa15ea4156613c75cfca5ecc0bd6a5193">Builder_plans::save_all_plans</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> path_output)<span class="keyword"> const</span>
<a name="l00172"></a>00172 <span class="keyword"></span>{
<a name="l00173"></a>00173         <span class="keywordtype">string</span> path_out(path_output);
<a name="l00174"></a>00174         path_out.append(<a class="code" href="namespacegenevalmag.html#a605c56dc4a9a367c9da7c7759c7f6b65">PATH_OUT_PLAN</a>);
<a name="l00175"></a>00175         <span class="keywordflow">if</span>(!<a class="code" href="namespaceutilities.html#a28f2ace508b6ea5bc7af05b84f0b2487">clean_output_folder</a>(path_out))
<a name="l00176"></a>00176         {
<a name="l00177"></a>00177                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00178"></a>00178         }
<a name="l00179"></a>00179         <span class="keywordflow">for</span>(map &lt; Key_plan, unsigned short &gt;::const_iterator it(<a class="code" href="classgenevalmag_1_1Builder__plans.html#a02c97bab7b3561f4dde009b974255dfe" title="Store all evaluation plans of the grammar. Saves index of plans_uniques vector. &amp;quot;ro&amp;quot;...">eval_plans</a>.begin()); it != <a class="code" href="classgenevalmag_1_1Builder__plans.html#a02c97bab7b3561f4dde009b974255dfe" title="Store all evaluation plans of the grammar. Saves index of plans_uniques vector. &amp;quot;ro&amp;quot;...">eval_plans</a>.end(); it++)
<a name="l00180"></a>00180         {
<a name="l00181"></a>00181                 <a class="code" href="namespacegenevalmag.html#a4a96de9ebfc7d48233406ab9cad55cb5">Graph</a> graph_plan;
<a name="l00182"></a>00182 
<a name="l00183"></a>00183                 <span class="keyword">const</span> <a class="code" href="namespacegenevalmag.html#a0bb2e8b0fa1b07b873f0363719de7b64">Order_eval_eq</a> &amp;plan_o(<a class="code" href="classgenevalmag_1_1Builder__plans.html#a9cb3fc77b164a22cf37a0ec3e8f78bf7">plans_uniques</a>[it-&gt;second]);
<a name="l00184"></a>00184 
<a name="l00185"></a>00185                 <span class="keywordtype">string</span> names[plan_o.size()];
<a name="l00186"></a>00186                 <a class="code" href="namespacegenevalmag.html#a2aae7b018fc2a9afae131bbf639181b5">Vertex</a> ant(0);
<a name="l00187"></a>00187                 <span class="comment">/* Creates graph. */</span>
<a name="l00188"></a>00188                 <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i(0); i &lt; plan_o.size(); i++)
<a name="l00189"></a>00189                 {
<a name="l00190"></a>00190                         <a class="code" href="namespacegenevalmag.html#a2aae7b018fc2a9afae131bbf639181b5">Vertex</a> current(add_vertex(graph_plan));
<a name="l00191"></a>00191                         <span class="keywordflow">if</span> (i &gt; 0)
<a name="l00192"></a>00192                         {
<a name="l00193"></a>00193                                 add_edge(ant,current,graph_plan);
<a name="l00194"></a>00194                         }
<a name="l00195"></a>00195                         ant = current;
<a name="l00196"></a>00196                         <span class="keyword">const</span> <a class="code" href="classgenevalmag_1_1Equation.html">Equation</a> *eq(<a class="code" href="classgenevalmag_1_1Builder__plans.html#a247759aafc18133de19c8c95afb9c2d5" title="References to the attribute grammar.">attr_grammar</a>.<a class="code" href="classgenevalmag_1_1Attr__grammar.html#a8a1e41dee53587c04675a3a46df941af">get_eq</a>(plan_o[i]));
<a name="l00197"></a>00197                         names[i] = <a class="code" href="namespaceutilities.html#a644dfdb507e47adf60e6984d28e080fd">cleaning_tabs</a>(eq-&gt;to_string());
<a name="l00198"></a>00198                 }
<a name="l00199"></a>00199                 <span class="comment">/* Obtains the rule. */</span>
<a name="l00200"></a>00200                 <span class="keywordtype">string</span> name_graph(<span class="stringliteral">&quot;Evaluation Plan of rule &quot;</span>);
<a name="l00201"></a>00201 
<a name="l00202"></a>00202                 <span class="keyword">const</span> <a class="code" href="namespacegenevalmag.html#aed20da32fb9692645ae53d911d274fd5">Order_rule</a> &amp;context_o(<a class="code" href="classgenevalmag_1_1Builder__plans.html#aac38711883bb0acd21483d2a918e0f0d" title="Store all different context rule generates in the grammar.">contexts_uniques</a>[it-&gt;first.id_plan]);
<a name="l00203"></a>00203 
<a name="l00204"></a>00204                 <span class="keyword">const</span> <a class="code" href="classgenevalmag_1_1Rule.html">Rule</a> *rule(&amp;(<a class="code" href="classgenevalmag_1_1Builder__plans.html#a247759aafc18133de19c8c95afb9c2d5" title="References to the attribute grammar.">attr_grammar</a>.<a class="code" href="classgenevalmag_1_1Attr__grammar.html#a41be9d108df7f8159bd989a5c174be87">get_rules</a>().find(context_o[0])-&gt;second));
<a name="l00205"></a>00205 
<a name="l00206"></a>00206                 name_graph.append(<a class="code" href="namespaceutilities.html#a644dfdb507e47adf60e6984d28e080fd">cleaning_tabs</a>(rule-&gt;<a class="code" href="classgenevalmag_1_1Rule.html#ab29cbf1ccafc2585524ee9cdbe58362b">to_string_not_eqs</a>()));
<a name="l00207"></a>00207 
<a name="l00208"></a>00208                 name_graph.append(<a class="code" href="namespaceutilities.html#a21bbcd26f651d4ceb798b50af71c7b29">write_inf_context</a>(context_o));
<a name="l00209"></a>00209 
<a name="l00210"></a>00210                 <span class="keyword">const</span> <a class="code" href="namespacegenevalmag.html#a0bb2e8b0fa1b07b873f0363719de7b64">Order_eval_eq</a> &amp;plan_ctx(<a class="code" href="classgenevalmag_1_1Builder__plans.html#a6a64fd58a3ce6c2f4b6c69df14ffee6e">plans_project_uniques</a>[it-&gt;first.plan]);
<a name="l00211"></a>00211 
<a name="l00212"></a>00212                 <span class="comment">/* Obtains the rule&#39;s context. */</span>
<a name="l00213"></a>00213                 <span class="keywordflow">if</span> (plan_ctx.size() == 0)
<a name="l00214"></a>00214                 {
<a name="l00215"></a>00215                         name_graph.append(<span class="stringliteral">&quot;, without Order.Sup&quot;</span>);
<a name="l00216"></a>00216                 }
<a name="l00217"></a>00217                 <span class="keywordflow">else</span>
<a name="l00218"></a>00218                 {
<a name="l00219"></a>00219                         name_graph.append(<span class="stringliteral">&quot;, order: &quot;</span>);
<a name="l00220"></a>00220                         <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i(0); i &lt; plan_ctx.size(); i++)
<a name="l00221"></a>00221                         {
<a name="l00222"></a>00222                                 name_graph.append(<span class="stringliteral">&quot; Eq&quot;</span>);
<a name="l00223"></a>00223                                 stringstream key_eq;
<a name="l00224"></a>00224                                 key_eq &lt;&lt; plan_ctx[i];
<a name="l00225"></a>00225                                 name_graph.append(key_eq.str());
<a name="l00226"></a>00226                                 <span class="keywordflow">if</span>(i &lt; plan_ctx.size() - 1)
<a name="l00227"></a>00227                                 {
<a name="l00228"></a>00228                                         name_graph.append(<span class="stringliteral">&quot; ,&quot;</span>);
<a name="l00229"></a>00229                                 }
<a name="l00230"></a>00230                         }
<a name="l00231"></a>00231                 }
<a name="l00232"></a>00232                 name_graph.append(<span class="stringliteral">&quot;.&quot;</span>);
<a name="l00233"></a>00233 
<a name="l00234"></a>00234                 <a class="code" href="namespaceutilities.html#ae0c73d526799122fa0d85cd45b6d4fbb">print_graph</a>(graph_plan, path_out.c_str(), <span class="stringliteral">&quot;_plan_graph&quot;</span>, name_graph, names, <span class="stringliteral">&quot;box&quot;</span>);
<a name="l00235"></a>00235         }
<a name="l00236"></a>00236         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00237"></a>00237 }
<a name="l00238"></a>00238 
<a name="l00242"></a><a class="code" href="classgenevalmag_1_1Builder__plans.html#a7017816e03c141df9dbdb55f3f8f896c">00242</a> <span class="keywordtype">bool</span> <a class="code" href="classgenevalmag_1_1Builder__plans.html#a7017816e03c141df9dbdb55f3f8f896c">Builder_plans::save_all_plans_project</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> path_output)<span class="keyword"> const</span>
<a name="l00243"></a>00243 <span class="keyword"></span>{
<a name="l00244"></a>00244         <span class="keywordtype">string</span> path_out(path_output);
<a name="l00245"></a>00245         path_out.append(<a class="code" href="namespacegenevalmag.html#a345f3ac168618479f16dbd899562685e">PATH_OUT_PLAN_PROJECT</a>);
<a name="l00246"></a>00246         <span class="keywordflow">if</span>(!<a class="code" href="namespaceutilities.html#a28f2ace508b6ea5bc7af05b84f0b2487">clean_output_folder</a>(path_out))
<a name="l00247"></a>00247         {
<a name="l00248"></a>00248                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00249"></a>00249         }
<a name="l00250"></a>00250 
<a name="l00251"></a>00251         <span class="keywordflow">for</span>(map &lt; Key_plan_project, unsigned short &gt;::const_iterator it(<a class="code" href="classgenevalmag_1_1Builder__plans.html#ab353b4b6e3b9c72a8fb61ee376a4f76c" title="Store all evaluation plans projects of the grammar.Saves index of plans_project_uniques...">plans_project</a>.begin()); it != <a class="code" href="classgenevalmag_1_1Builder__plans.html#ab353b4b6e3b9c72a8fb61ee376a4f76c" title="Store all evaluation plans projects of the grammar.Saves index of plans_project_uniques...">plans_project</a>.end(); it++)
<a name="l00252"></a>00252         {
<a name="l00253"></a>00253                 <a class="code" href="namespacegenevalmag.html#a4a96de9ebfc7d48233406ab9cad55cb5">Graph</a> graph_plan;
<a name="l00254"></a>00254 
<a name="l00255"></a>00255                 <span class="keyword">const</span> <a class="code" href="namespacegenevalmag.html#a0bb2e8b0fa1b07b873f0363719de7b64">Order_eval_eq</a> &amp;plan_p_o(<a class="code" href="classgenevalmag_1_1Builder__plans.html#a6a64fd58a3ce6c2f4b6c69df14ffee6e">plans_project_uniques</a>[it-&gt;second]);
<a name="l00256"></a>00256 
<a name="l00257"></a>00257                 <span class="keywordtype">string</span> names[plan_p_o.size()];
<a name="l00258"></a>00258                 <a class="code" href="namespacegenevalmag.html#a2aae7b018fc2a9afae131bbf639181b5">Vertex</a> ant(0);
<a name="l00259"></a>00259                 <span class="comment">/* Creates graph. */</span>
<a name="l00260"></a>00260                 <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i(0); i &lt; plan_p_o.size(); i++)
<a name="l00261"></a>00261                 {
<a name="l00262"></a>00262                         <a class="code" href="namespacegenevalmag.html#a2aae7b018fc2a9afae131bbf639181b5">Vertex</a> current(add_vertex(graph_plan));
<a name="l00263"></a>00263                         <span class="keywordflow">if</span> (i &gt; 0)
<a name="l00264"></a>00264                         {
<a name="l00265"></a>00265                                 add_edge(ant,current,graph_plan);
<a name="l00266"></a>00266                         }
<a name="l00267"></a>00267                         ant = current;
<a name="l00268"></a>00268                         <span class="keyword">const</span> <a class="code" href="classgenevalmag_1_1Equation.html">Equation</a> *eq(<a class="code" href="classgenevalmag_1_1Builder__plans.html#a247759aafc18133de19c8c95afb9c2d5" title="References to the attribute grammar.">attr_grammar</a>.<a class="code" href="classgenevalmag_1_1Attr__grammar.html#a8a1e41dee53587c04675a3a46df941af">get_eq</a>(plan_p_o[i]));
<a name="l00269"></a>00269                         names[i] = <a class="code" href="namespaceutilities.html#a644dfdb507e47adf60e6984d28e080fd">cleaning_tabs</a>(eq-&gt;to_string());
<a name="l00270"></a>00270                 }
<a name="l00271"></a>00271 
<a name="l00272"></a>00272                 <span class="comment">/* Obtains the rule. */</span>
<a name="l00273"></a>00273                 <span class="keywordtype">string</span> name_graph(<span class="stringliteral">&quot;Evaluation Plan Project of rule &quot;</span>);
<a name="l00274"></a>00274 
<a name="l00275"></a>00275                 <span class="keyword">const</span> <a class="code" href="namespacegenevalmag.html#aed20da32fb9692645ae53d911d274fd5">Order_rule</a> &amp;context_o(<a class="code" href="classgenevalmag_1_1Builder__plans.html#aac38711883bb0acd21483d2a918e0f0d" title="Store all different context rule generates in the grammar.">contexts_uniques</a>[it-&gt;first.id_plan_project.id_plan]);
<a name="l00276"></a>00276 
<a name="l00277"></a>00277                 <span class="keyword">const</span> <a class="code" href="classgenevalmag_1_1Rule.html">Rule</a> *rule(&amp;(<a class="code" href="classgenevalmag_1_1Builder__plans.html#a247759aafc18133de19c8c95afb9c2d5" title="References to the attribute grammar.">attr_grammar</a>.<a class="code" href="classgenevalmag_1_1Attr__grammar.html#a41be9d108df7f8159bd989a5c174be87">get_rules</a>().find(context_o[0])-&gt;second));
<a name="l00278"></a>00278                 name_graph.append(<a class="code" href="namespaceutilities.html#a644dfdb507e47adf60e6984d28e080fd">cleaning_tabs</a>(rule-&gt;<a class="code" href="classgenevalmag_1_1Rule.html#ab29cbf1ccafc2585524ee9cdbe58362b">to_string_not_eqs</a>()));
<a name="l00279"></a>00279 
<a name="l00280"></a>00280                 name_graph.append(<a class="code" href="namespaceutilities.html#a21bbcd26f651d4ceb798b50af71c7b29">write_inf_context</a>(context_o));
<a name="l00281"></a>00281 
<a name="l00282"></a>00282                 <span class="keyword">const</span> <a class="code" href="namespacegenevalmag.html#a0bb2e8b0fa1b07b873f0363719de7b64">Order_eval_eq</a> &amp;plan_p_ctx(<a class="code" href="classgenevalmag_1_1Builder__plans.html#a6a64fd58a3ce6c2f4b6c69df14ffee6e">plans_project_uniques</a>[it-&gt;first.id_plan_project.plan]);
<a name="l00283"></a>00283 
<a name="l00284"></a>00284                 <span class="comment">/* Obtains the rule&#39;s context. */</span>
<a name="l00285"></a>00285                 <span class="keywordflow">if</span> (plan_p_ctx.size() == 0)
<a name="l00286"></a>00286                 {
<a name="l00287"></a>00287                         name_graph.append(<span class="stringliteral">&quot;, without Order.Sup&quot;</span>);
<a name="l00288"></a>00288                 }
<a name="l00289"></a>00289                 <span class="keywordflow">else</span>
<a name="l00290"></a>00290                 {
<a name="l00291"></a>00291                         name_graph.append(<span class="stringliteral">&quot;, Order.Sup: &quot;</span>);
<a name="l00292"></a>00292                         <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i(0); i &lt; plan_p_ctx.size(); i++)
<a name="l00293"></a>00293                         {
<a name="l00294"></a>00294                                 name_graph.append(<span class="stringliteral">&quot; Eq&quot;</span>);
<a name="l00295"></a>00295                                 stringstream key_eq;
<a name="l00296"></a>00296                                 key_eq &lt;&lt; plan_p_ctx[i];
<a name="l00297"></a>00297                                 name_graph.append(key_eq.str());
<a name="l00298"></a>00298                                 <span class="keywordflow">if</span>(i &lt; plan_p_ctx.size() - 1)
<a name="l00299"></a>00299                                 {
<a name="l00300"></a>00300                                         name_graph.append(<span class="stringliteral">&quot; ,&quot;</span>);
<a name="l00301"></a>00301                                 }
<a name="l00302"></a>00302                         }
<a name="l00303"></a>00303                 }
<a name="l00304"></a>00304                 <span class="comment">/* Obtains the symbol projected. */</span>
<a name="l00305"></a>00305                 name_graph.append(<span class="stringliteral">&quot; and Symbol: &quot;</span>);
<a name="l00306"></a>00306                 name_graph.append(it-&gt;first.symbol_project-&gt;get_name());
<a name="l00307"></a>00307                 name_graph.append(<span class="stringliteral">&quot; &quot;</span>);
<a name="l00308"></a>00308                 stringstream symb_ocurence;
<a name="l00309"></a>00309                 symb_ocurence &lt;&lt; it-&gt;first.index_ocurrence;
<a name="l00310"></a>00310                 name_graph.append(symb_ocurence.str());
<a name="l00311"></a>00311                 name_graph.append(<span class="stringliteral">&quot;.&quot;</span>);
<a name="l00312"></a>00312 
<a name="l00313"></a>00313                 <a class="code" href="namespaceutilities.html#ae0c73d526799122fa0d85cd45b6d4fbb">print_graph</a>(graph_plan, path_out.c_str(), <span class="stringliteral">&quot;_plan_project_graph&quot;</span>, name_graph, names, <span class="stringliteral">&quot;box&quot;</span>);
<a name="l00314"></a>00314         }
<a name="l00315"></a>00315         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00316"></a>00316 }
<a name="l00317"></a>00317 
<a name="l00321"></a><a class="code" href="namespacegenevalmag.html#ace0b7e67565040ba64e1710d0029026b">00321</a> <span class="keywordtype">void</span> <a class="code" href="namespacegenevalmag.html#ace0b7e67565040ba64e1710d0029026b">purge_plan_with</a>(<span class="keyword">const</span> <a class="code" href="classgenevalmag_1_1Rule.html">Rule</a> &amp;rule, <span class="keyword">const</span> <a class="code" href="namespacegenevalmag.html#a0bb2e8b0fa1b07b873f0363719de7b64">Order_eval_eq</a> &amp;order_eq, <a class="code" href="namespacegenevalmag.html#a0bb2e8b0fa1b07b873f0363719de7b64">Order_eval_eq</a> &amp;purged_order)
<a name="l00322"></a>00322 {
<a name="l00323"></a>00323         <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i(0); i &lt; order_eq.size(); i++)
<a name="l00324"></a>00324         {
<a name="l00325"></a>00325                 <span class="keywordflow">if</span>(rule.<a class="code" href="classgenevalmag_1_1Rule.html#af7912b2d239ede0e33ed6cb12b2d79ee">get_eq</a>(order_eq[i]) != NULL)
<a name="l00326"></a>00326                 {
<a name="l00327"></a>00327                         <span class="keywordflow">if</span> (!<a class="code" href="namespaceutilities.html#aa452cf7f1132b5d667bdeefffb33425f">belong_index</a>(order_eq[i],purged_order))
<a name="l00328"></a>00328                         {
<a name="l00329"></a>00329                                 purged_order.push_back(order_eq[i]);
<a name="l00330"></a>00330                         }
<a name="l00331"></a>00331                 }
<a name="l00332"></a>00332         }
<a name="l00333"></a>00333 }
<a name="l00334"></a>00334 
<a name="l00338"></a><a class="code" href="namespacegenevalmag.html#ad89277e822c1a4d635c554e8c6698e76">00338</a> <span class="keywordtype">bool</span> <a class="code" href="namespacegenevalmag.html#ad89277e822c1a4d635c554e8c6698e76">defined_work</a> (<span class="keyword">const</span> vector &lt; Item_work &gt; &amp;list, <span class="keyword">const</span> <a class="code" href="structgenevalmag_1_1i__w.html">Item_work</a> &amp;item_work)
<a name="l00339"></a>00339 {
<a name="l00340"></a>00340         <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i(0); i &lt; list.size(); i++)
<a name="l00341"></a>00341         {
<a name="l00342"></a>00342                 <span class="keywordflow">if</span>(item_work == list[i])
<a name="l00343"></a>00343                 {
<a name="l00344"></a>00344                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00345"></a>00345                 }
<a name="l00346"></a>00346         }
<a name="l00347"></a>00347         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00348"></a>00348 }
<a name="l00349"></a>00349 
<a name="l00353"></a><a class="code" href="classgenevalmag_1_1Builder__plans.html#ae44e39bd410967f7f882100b33fb3405">00353</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classgenevalmag_1_1Builder__plans.html#ae44e39bd410967f7f882100b33fb3405">Builder_plans::return_index_context</a>(<span class="keyword">const</span> <a class="code" href="namespacegenevalmag.html#aed20da32fb9692645ae53d911d274fd5">Order_rule</a> &amp;order)
<a name="l00354"></a>00354 {
<a name="l00355"></a>00355         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> index(0);
<a name="l00356"></a>00356         <span class="keywordflow">for</span>(; index &lt; <a class="code" href="classgenevalmag_1_1Builder__plans.html#aac38711883bb0acd21483d2a918e0f0d" title="Store all different context rule generates in the grammar.">contexts_uniques</a>.size(); index++)
<a name="l00357"></a>00357         {
<a name="l00358"></a>00358                 <span class="keywordflow">if</span>(order == <a class="code" href="classgenevalmag_1_1Builder__plans.html#aac38711883bb0acd21483d2a918e0f0d" title="Store all different context rule generates in the grammar.">contexts_uniques</a>[index])
<a name="l00359"></a>00359                 {
<a name="l00360"></a>00360                         <span class="keywordflow">return</span> index;
<a name="l00361"></a>00361                 }
<a name="l00362"></a>00362         }
<a name="l00363"></a>00363         <a class="code" href="classgenevalmag_1_1Builder__plans.html#aac38711883bb0acd21483d2a918e0f0d" title="Store all different context rule generates in the grammar.">contexts_uniques</a>.push_back(order);
<a name="l00364"></a>00364         <span class="keywordflow">return</span> index;
<a name="l00365"></a>00365 }
<a name="l00366"></a>00366 
<a name="l00370"></a><a class="code" href="namespacegenevalmag.html#a4c59332bf08ed52e98321fe6b6340f29">00370</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="namespacegenevalmag.html#a4c59332bf08ed52e98321fe6b6340f29">return_index_vec</a>(<span class="keyword">const</span> <a class="code" href="namespacegenevalmag.html#a0bb2e8b0fa1b07b873f0363719de7b64">Order_eval_eq</a> &amp;order, vector&lt;Order_eval_eq&gt; &amp;vec)
<a name="l00371"></a>00371 {
<a name="l00372"></a>00372         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> index(0);
<a name="l00373"></a>00373         <span class="keywordflow">for</span>(; index &lt; vec.size(); index++)
<a name="l00374"></a>00374         {
<a name="l00375"></a>00375                 <span class="keywordflow">if</span>(order == vec[index])
<a name="l00376"></a>00376                 {
<a name="l00377"></a>00377                         <span class="keywordflow">return</span> index;
<a name="l00378"></a>00378                 }
<a name="l00379"></a>00379         }
<a name="l00380"></a>00380         vec.push_back(order);
<a name="l00381"></a>00381         <span class="keywordflow">return</span> index;
<a name="l00382"></a>00382 }
<a name="l00383"></a>00383 
<a name="l00387"></a><a class="code" href="classgenevalmag_1_1Builder__plans.html#a0a0fba0d3630f02c280f9d3997c6bd80">00387</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classgenevalmag_1_1Builder__plans.html#a0a0fba0d3630f02c280f9d3997c6bd80">Builder_plans::return_index_plan</a>(<span class="keyword">const</span> <a class="code" href="namespacegenevalmag.html#a0bb2e8b0fa1b07b873f0363719de7b64">Order_eval_eq</a> &amp;order)
<a name="l00388"></a>00388 {
<a name="l00389"></a>00389         <span class="keywordflow">return</span> <a class="code" href="namespacegenevalmag.html#a4c59332bf08ed52e98321fe6b6340f29">return_index_vec</a>(order, <a class="code" href="classgenevalmag_1_1Builder__plans.html#a9cb3fc77b164a22cf37a0ec3e8f78bf7">plans_uniques</a>);
<a name="l00390"></a>00390 }
<a name="l00391"></a>00391 
<a name="l00395"></a><a class="code" href="classgenevalmag_1_1Builder__plans.html#a08c73ceb7e4bbd71732cac943ccfbaa9">00395</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classgenevalmag_1_1Builder__plans.html#a08c73ceb7e4bbd71732cac943ccfbaa9">Builder_plans::return_index_plan_p</a>(<span class="keyword">const</span> <a class="code" href="namespacegenevalmag.html#a0bb2e8b0fa1b07b873f0363719de7b64">Order_eval_eq</a> &amp;order)
<a name="l00396"></a>00396 {
<a name="l00397"></a>00397         <span class="keywordflow">return</span> <a class="code" href="namespacegenevalmag.html#a4c59332bf08ed52e98321fe6b6340f29">return_index_vec</a>(order, <a class="code" href="classgenevalmag_1_1Builder__plans.html#a6a64fd58a3ce6c2f4b6c69df14ffee6e">plans_project_uniques</a>);
<a name="l00398"></a>00398 }
<a name="l00399"></a>00399 
<a name="l00403"></a><a class="code" href="classgenevalmag_1_1Builder__plans.html#a5002819447c17a1f81c197da66bd3e56">00403</a> <span class="keywordtype">bool</span> <a class="code" href="classgenevalmag_1_1Builder__plans.html#a5002819447c17a1f81c197da66bd3e56">Builder_plans::generate_plans</a>()
<a name="l00404"></a>00404 {
<a name="l00405"></a>00405         vector &lt; Item_work &gt; work_list;
<a name="l00406"></a>00406         vector &lt; Item_work &gt; defined_item_work;
<a name="l00407"></a>00407         <span class="comment">/* Initial Rule: Is the position &quot;1&quot; because for obtain the initial symbol uses the rule &quot;1&quot;*/</span>
<a name="l00408"></a>00408         <span class="keyword">const</span> <a class="code" href="classgenevalmag_1_1Rule.html">Rule</a> &amp;initial_rule(<a class="code" href="classgenevalmag_1_1Builder__plans.html#a247759aafc18133de19c8c95afb9c2d5" title="References to the attribute grammar.">attr_grammar</a>.<a class="code" href="classgenevalmag_1_1Attr__grammar.html#a41be9d108df7f8159bd989a5c174be87">get_rules</a>().begin()-&gt;second);
<a name="l00409"></a>00409 
<a name="l00410"></a>00410         <span class="comment">/* Initializes the work list with the rule with the initial symbol grammar. */</span>
<a name="l00411"></a>00411         <a class="code" href="namespacegenevalmag.html#a0bb2e8b0fa1b07b873f0363719de7b64">Order_eval_eq</a> init_order;
<a name="l00412"></a>00412         <a class="code" href="structgenevalmag_1_1c__rule.html">Context_rule</a> context;
<a name="l00413"></a>00413         context.<a class="code" href="structgenevalmag_1_1c__rule.html#abe7fed1600af3652ab298ac2a897b18f" title="Index context father (rule).">father</a> = 0; <span class="comment">/* Initial rule hasn&#39;t father. */</span>
<a name="l00414"></a>00414         vector &lt; unsigned short &gt; invoque_context;
<a name="l00415"></a>00415         invoque_context.push_back(initial_rule.key());
<a name="l00416"></a>00416         context.<a class="code" href="structgenevalmag_1_1c__rule.html#af0b0004a1f307e5cb18ed26d3e983f1d" title="Indexs contexts inferior (rules).">context</a> = invoque_context;
<a name="l00417"></a>00417         <a class="code" href="classgenevalmag_1_1Builder__plans.html#a9293c2318f2a323616fc49505a44e4e3">generates_topological_order</a>(<a class="code" href="classgenevalmag_1_1Builder__plans.html#ac1d890f07dc50cc1d7383a73bb5bb5af" title="Stores all graphs DP, DOWN, DCG and ADP, generated for the grammar&amp;#39;s analisys...">build_graphs</a>.<a class="code" href="classgenevalmag_1_1Builder__graphs.html#a5850a6c7a2248394ead2b63aeca7ff9b">get_dcg_graph</a>(initial_rule.key()), init_order, context);
<a name="l00418"></a>00418 
<a name="l00419"></a>00419         <a class="code" href="classgenevalmag_1_1Builder__plans.html#abe50c9e30276ceaeea344f6a95f23db8" title="Store the initial evaluation order of the attributes of the initial symbol.">init_order_ag</a> = <a class="code" href="classgenevalmag_1_1Builder__plans.html#a08c73ceb7e4bbd71732cac943ccfbaa9">return_index_plan_p</a>(init_order);
<a name="l00420"></a>00420 
<a name="l00421"></a>00421         <a class="code" href="structgenevalmag_1_1k__w.html">Key_work_list</a> key;
<a name="l00422"></a>00422         <span class="comment">/* Initial rule hasn&#39;t father. */</span>
<a name="l00423"></a>00423         key.<a class="code" href="structgenevalmag_1_1k__w.html#aef2a6d852e6beedc2247a9fc62033313" title="Index context father (rule).">father</a> = 0;
<a name="l00424"></a>00424         key.<a class="code" href="structgenevalmag_1_1k__w.html#ab31e8aba428c97c3717c5860509eb3cc" title="The index of rule.">id_rule</a> = initial_rule.key();
<a name="l00425"></a>00425         <a class="code" href="structgenevalmag_1_1i__w.html">Item_work</a> i_eval;
<a name="l00426"></a>00426         i_eval.<a class="code" href="structgenevalmag_1_1i__w.html#acb047851d2d48bfa097543a5a891e995" title="A key_work_list.">item</a> = key;
<a name="l00427"></a>00427         i_eval.<a class="code" href="structgenevalmag_1_1i__w.html#aa3b6c0dee2aa7ce5808ff3d7068e20e9" title="Order of ecuation.">order_attr</a> = <a class="code" href="classgenevalmag_1_1Builder__plans.html#abe50c9e30276ceaeea344f6a95f23db8" title="Store the initial evaluation order of the attributes of the initial symbol.">init_order_ag</a>;
<a name="l00428"></a>00428         work_list.push_back(i_eval);
<a name="l00429"></a>00429 
<a name="l00430"></a>00430         <span class="keyword">const</span> map&lt;vector&lt;unsigned short&gt;,<a class="code" href="namespacegenevalmag.html#a4a96de9ebfc7d48233406ab9cad55cb5">Graph</a>&gt; &amp;adp_graphs(<a class="code" href="classgenevalmag_1_1Builder__plans.html#ac1d890f07dc50cc1d7383a73bb5bb5af" title="Stores all graphs DP, DOWN, DCG and ADP, generated for the grammar&amp;#39;s analisys...">build_graphs</a>.<a class="code" href="classgenevalmag_1_1Builder__graphs.html#a96271a5edae352ea39ad4f627877d8a4">get_adp_graphs</a>());
<a name="l00431"></a>00431 
<a name="l00432"></a>00432         <span class="keywordflow">while</span>(work_list.size() &gt; 0)
<a name="l00433"></a>00433         {
<a name="l00434"></a>00434                 <a class="code" href="structgenevalmag_1_1i__w.html">Item_work</a> i_work(work_list.back());
<a name="l00435"></a>00435                 work_list.pop_back();
<a name="l00436"></a>00436 
<a name="l00437"></a>00437                 <span class="keywordflow">if</span> (!<a class="code" href="namespacegenevalmag.html#ad89277e822c1a4d635c554e8c6698e76">defined_work</a>(defined_item_work, i_work))
<a name="l00438"></a>00438                 <span class="comment">/* A(q,w) is not marked */</span>
<a name="l00439"></a>00439                 {
<a name="l00440"></a>00440                         defined_item_work.push_back(i_work);
<a name="l00441"></a>00441 
<a name="l00442"></a>00442                         <span class="keywordflow">for</span>(map&lt;vector&lt;unsigned short&gt;,<a class="code" href="namespacegenevalmag.html#a4a96de9ebfc7d48233406ab9cad55cb5">Graph</a>&gt;::const_iterator adp(adp_graphs.begin()); adp != adp_graphs.end(); adp++)
<a name="l00443"></a>00443                         {
<a name="l00444"></a>00444                                 <span class="comment">/* Current rule that defines the ADP. */</span>
<a name="l00445"></a>00445                                 <span class="keyword">const</span> <a class="code" href="classgenevalmag_1_1Rule.html">Rule</a>&amp; rule(<a class="code" href="classgenevalmag_1_1Builder__plans.html#a247759aafc18133de19c8c95afb9c2d5" title="References to the attribute grammar.">attr_grammar</a>.<a class="code" href="classgenevalmag_1_1Attr__grammar.html#a3452d5ee579a9985a52edcf6a97678d5">get_rule</a>(adp-&gt;first[0]));
<a name="l00446"></a>00446 
<a name="l00447"></a>00447                                 <span class="keywordflow">if</span> (rule.key() == i_work.item.id_rule)
<a name="l00448"></a>00448                                 <span class="comment">/* The adp graph belong at rule of the item_work current. */</span>
<a name="l00449"></a>00449                                 {
<a name="l00450"></a>00450                                         <span class="comment">/* Creates the context rule with superior context and context of rule. */</span>
<a name="l00451"></a>00451                                         <a class="code" href="structgenevalmag_1_1c__rule.html">Context_rule</a> context;
<a name="l00452"></a>00452                                         context.<a class="code" href="structgenevalmag_1_1c__rule.html#abe7fed1600af3652ab298ac2a897b18f" title="Index context father (rule).">father</a> = i_work.item.father;
<a name="l00453"></a>00453                                         context.<a class="code" href="structgenevalmag_1_1c__rule.html#af0b0004a1f307e5cb18ed26d3e983f1d" title="Indexs contexts inferior (rules).">context</a> = adp-&gt;first;
<a name="l00454"></a>00454 
<a name="l00455"></a>00455                                         <a class="code" href="namespacegenevalmag.html#a0bb2e8b0fa1b07b873f0363719de7b64">Order_eval_eq</a> total_order(<a class="code" href="classgenevalmag_1_1Builder__plans.html#a86e05ee91d27e62d16d77ecbdec05bf7">compute_order</a>(adp-&gt;second, i_work.order_attr, context));
<a name="l00456"></a>00456 
<a name="l00457"></a>00457                                         <a class="code" href="namespacegenevalmag.html#a0bb2e8b0fa1b07b873f0363719de7b64">Order_eval_eq</a> order_purged;
<a name="l00458"></a>00458                                         <a class="code" href="namespacegenevalmag.html#ace0b7e67565040ba64e1710d0029026b">purge_plan_with</a>(rule, total_order, order_purged);
<a name="l00459"></a>00459 
<a name="l00460"></a>00460                                         <span class="comment">/* Saves the new_plan in the map. */</span>
<a name="l00461"></a>00461                                         <a class="code" href="structgenevalmag_1_1k__plan.html">Key_plan</a> key_plan;
<a name="l00462"></a>00462                                         key_plan.<a class="code" href="structgenevalmag_1_1k__plan.html#a477573001560bced8ad15aa7a5013ac0" title="Index plan. - index to order superior.">id_plan</a> = <a class="code" href="classgenevalmag_1_1Builder__plans.html#ae44e39bd410967f7f882100b33fb3405">return_index_context</a>(adp-&gt;first);
<a name="l00463"></a>00463 
<a name="l00464"></a>00464                                         key_plan.<a class="code" href="structgenevalmag_1_1k__plan.html#ac948a26cdaa4b9ea54cc04ac27c99e3c" title="Index plan.">plan</a> = i_work.order_attr;
<a name="l00465"></a>00465                                         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> index_plan = <a class="code" href="classgenevalmag_1_1Builder__plans.html#a0a0fba0d3630f02c280f9d3997c6bd80">return_index_plan</a>(order_purged);
<a name="l00466"></a>00466                                         pair &lt; Key_plan, unsigned short &gt; new_p(key_plan, index_plan);
<a name="l00467"></a>00467                                         <a class="code" href="classgenevalmag_1_1Builder__plans.html#a02c97bab7b3561f4dde009b974255dfe" title="Store all evaluation plans of the grammar. Saves index of plans_uniques vector. &amp;quot;ro&amp;quot;...">eval_plans</a>.insert(new_p);
<a name="l00468"></a>00468 
<a name="l00469"></a>00469                                         vector&lt;const Symbol*&gt; right_side(rule.get_non_terminals_right_side());
<a name="l00470"></a>00470 
<a name="l00471"></a>00471                                         <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i(0); i &lt; right_side.size(); i++)
<a name="l00472"></a>00472                                         {
<a name="l00473"></a>00473                                                 <a class="code" href="namespacegenevalmag.html#a0bb2e8b0fa1b07b873f0363719de7b64">Order_eval_eq</a> proj_order;
<a name="l00474"></a>00474 
<a name="l00475"></a>00475                                                 <span class="keyword">const</span> <a class="code" href="classgenevalmag_1_1Rule.html">Rule</a>&amp; rule_proj(<a class="code" href="classgenevalmag_1_1Builder__plans.html#a247759aafc18133de19c8c95afb9c2d5" title="References to the attribute grammar.">attr_grammar</a>.<a class="code" href="classgenevalmag_1_1Attr__grammar.html#a3452d5ee579a9985a52edcf6a97678d5">get_rule</a>(adp-&gt;first[i+1]));
<a name="l00476"></a>00476 
<a name="l00477"></a>00477                                                 <a class="code" href="namespacegenevalmag.html#ace0b7e67565040ba64e1710d0029026b">purge_plan_with</a>(rule_proj, total_order, proj_order);
<a name="l00478"></a>00478 
<a name="l00479"></a>00479                                                 <span class="keywordflow">if</span> (proj_order.size() &gt; 0)
<a name="l00480"></a>00480                                                 <span class="comment">/* if size == 0 this plan not interesting on this project. */</span>
<a name="l00481"></a>00481                                                 {
<a name="l00482"></a>00482                                                         <span class="comment">/* Saves the new_plan_projected in the projected map. */</span>
<a name="l00483"></a>00483                                                         <a class="code" href="structgenevalmag_1_1k__p__project.html">Key_plan_project</a> key_project;
<a name="l00484"></a>00484                                                         key_project.<a class="code" href="structgenevalmag_1_1k__p__project.html#afc065645098439a308c5ca879e5e5a51" title="key_plan">id_plan_project</a> = key_plan;
<a name="l00485"></a>00485                                                         key_project.<a class="code" href="structgenevalmag_1_1k__p__project.html#a64f5efd91847bd333263c799360dd0b5" title="Projected Symbol.">symbol_project</a> = right_side[i];
<a name="l00486"></a>00486                                                         key_project.<a class="code" href="structgenevalmag_1_1k__p__project.html#a42b98a1d22cb7215bdc7a0432f94cbcc">index_ocurrence</a> = i;
<a name="l00487"></a>00487                                                         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> index_plan_p = <a class="code" href="classgenevalmag_1_1Builder__plans.html#a08c73ceb7e4bbd71732cac943ccfbaa9">return_index_plan_p</a>(proj_order);
<a name="l00488"></a>00488                                                         pair &lt; Key_plan_project, unsigned short &gt; new_p(key_project, index_plan_p);
<a name="l00489"></a>00489                                                         <a class="code" href="classgenevalmag_1_1Builder__plans.html#ab353b4b6e3b9c72a8fb61ee376a4f76c" title="Store all evaluation plans projects of the grammar.Saves index of plans_project_uniques...">plans_project</a>.insert(new_p);
<a name="l00490"></a>00490 
<a name="l00491"></a>00491                                                         <span class="comment">/* Creates new plans for the work-list with the rule&#39;s right symbol.  */</span>
<a name="l00492"></a>00492                                                         <a class="code" href="structgenevalmag_1_1k__w.html">Key_work_list</a> key;
<a name="l00493"></a>00493                                                         <span class="comment">/* adp-&gt;firts[0] is the id-rule. */</span>
<a name="l00494"></a>00494                                                         key.<a class="code" href="structgenevalmag_1_1k__w.html#aef2a6d852e6beedc2247a9fc62033313" title="Index context father (rule).">father</a> = rule.key();
<a name="l00495"></a>00495                                                         <span class="comment">/* adp-&gt;firts[i+1] is the id_rule of rule for the i-esimo non-termials.*/</span>
<a name="l00496"></a>00496                                                         key.<a class="code" href="structgenevalmag_1_1k__w.html#ab31e8aba428c97c3717c5860509eb3cc" title="The index of rule.">id_rule</a> = adp-&gt;first[i+1];
<a name="l00497"></a>00497                                                         <a class="code" href="structgenevalmag_1_1i__w.html">Item_work</a> i_work_new;
<a name="l00498"></a>00498                                                         i_work_new.<a class="code" href="structgenevalmag_1_1i__w.html#acb047851d2d48bfa097543a5a891e995" title="A key_work_list.">item</a> = key;
<a name="l00499"></a>00499                                                         i_work_new.<a class="code" href="structgenevalmag_1_1i__w.html#aa3b6c0dee2aa7ce5808ff3d7068e20e9" title="Order of ecuation.">order_attr</a> = index_plan_p;
<a name="l00500"></a>00500                                                         <span class="keywordflow">if</span> (!<a class="code" href="namespacegenevalmag.html#ad89277e822c1a4d635c554e8c6698e76">defined_work</a>(defined_item_work, i_work_new))
<a name="l00501"></a>00501                                                         {
<a name="l00502"></a>00502                                                                 <span class="keywordflow">if</span>(!<a class="code" href="namespacegenevalmag.html#ad89277e822c1a4d635c554e8c6698e76">defined_work</a>(work_list, i_work_new))
<a name="l00503"></a>00503                                                                 {
<a name="l00504"></a>00504                                                                         work_list.push_back(i_work_new);
<a name="l00505"></a>00505                                                                 }
<a name="l00506"></a>00506                                                         }
<a name="l00507"></a>00507                                                 }
<a name="l00508"></a>00508                                         }
<a name="l00509"></a>00509                                 }
<a name="l00510"></a>00510                         }
<a name="l00511"></a>00511                 }
<a name="l00512"></a>00512         }
<a name="l00513"></a>00513         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00514"></a>00514 }
<a name="l00515"></a>00515 
<a name="l00521"></a><a class="code" href="classgenevalmag_1_1Builder__plans.html#a3337ccac1c358d9b0a1de456ff74b0cb">00521</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classgenevalmag_1_1Builder__plans.html#a3337ccac1c358d9b0a1de456ff74b0cb">Builder_plans::build_plans</a>()
<a name="l00522"></a>00522 {
<a name="l00523"></a>00523         <span class="keywordflow">if</span>(<a class="code" href="classgenevalmag_1_1Builder__plans.html#a9552dcef13af0de0f3f2ff59a330d15c">generate_graphs</a>())
<a name="l00524"></a>00524         {
<a name="l00525"></a>00525                 <span class="keywordflow">if</span> (<a class="code" href="classgenevalmag_1_1Builder__plans.html#ac1d890f07dc50cc1d7383a73bb5bb5af" title="Stores all graphs DP, DOWN, DCG and ADP, generated for the grammar&amp;#39;s analisys...">build_graphs</a>.<a class="code" href="classgenevalmag_1_1Builder__graphs.html#a278e4c659e6fd91e1f3fc8d37a0edea9">check_cyclic_adp_dependencies</a>())
<a name="l00526"></a>00526                 {
<a name="l00527"></a>00527                         cout &lt;&lt; <span class="stringliteral">&quot;* Build plans -------------- [ ABORT ]\n&quot;</span> &lt;&lt; endl;
<a name="l00528"></a>00528                         <span class="keywordflow">return</span> 1;
<a name="l00529"></a>00529                 }
<a name="l00530"></a>00530                 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classgenevalmag_1_1Builder__plans.html#a5002819447c17a1f81c197da66bd3e56">generate_plans</a>())
<a name="l00531"></a>00531                 {
<a name="l00532"></a>00532                         cout &lt;&lt; <span class="stringliteral">&quot;* Build plans -------------- [  OK  ]&quot;</span> &lt;&lt; endl;
<a name="l00533"></a>00533                         <span class="keywordflow">return</span> 0;
<a name="l00534"></a>00534                 }
<a name="l00535"></a>00535                 cout &lt;&lt; <span class="stringliteral">&quot;* Build plans -------------- [ FAIL ]\n&quot;</span> &lt;&lt; endl;
<a name="l00536"></a>00536         }
<a name="l00537"></a>00537         <span class="keywordflow">return</span> 2;
<a name="l00538"></a>00538 }
<a name="l00539"></a>00539 
<a name="l00543"></a><a class="code" href="classgenevalmag_1_1Builder__plans.html#a72ef4716a24888c994c1b0a5c70b88a8">00543</a> <span class="keyword">const</span> <a class="code" href="namespacegenevalmag.html#aed20da32fb9692645ae53d911d274fd5">Order_rule</a> &amp;<a class="code" href="classgenevalmag_1_1Builder__plans.html#a72ef4716a24888c994c1b0a5c70b88a8">Builder_plans::get_context_unique</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> i_context)<span class="keyword"> const</span>
<a name="l00544"></a>00544 <span class="keyword"></span>{
<a name="l00545"></a>00545         <span class="keywordflow">return</span> <a class="code" href="classgenevalmag_1_1Builder__plans.html#aac38711883bb0acd21483d2a918e0f0d" title="Store all different context rule generates in the grammar.">contexts_uniques</a>[i_context];
<a name="l00546"></a>00546 }
<a name="l00547"></a>00547 
<a name="l00551"></a><a class="code" href="classgenevalmag_1_1Builder__plans.html#a72a79884798342895b1b0779a1938031">00551</a> <span class="keyword">const</span> vector &lt; Order_rule &gt; &amp;<a class="code" href="classgenevalmag_1_1Builder__plans.html#a72a79884798342895b1b0779a1938031">Builder_plans::get_contexts_uniques</a>()<span class="keyword"> const</span>
<a name="l00552"></a>00552 <span class="keyword"></span>{
<a name="l00553"></a>00553         <span class="keywordflow">return</span> <a class="code" href="classgenevalmag_1_1Builder__plans.html#aac38711883bb0acd21483d2a918e0f0d" title="Store all different context rule generates in the grammar.">contexts_uniques</a>;
<a name="l00554"></a>00554 }
<a name="l00555"></a>00555 
<a name="l00559"></a><a class="code" href="classgenevalmag_1_1Builder__plans.html#a75890521873bd1f8bee15799d820d755">00559</a> <span class="keyword">const</span> map &lt; Key_plan, unsigned short &gt; &amp;<a class="code" href="classgenevalmag_1_1Builder__plans.html#a75890521873bd1f8bee15799d820d755">Builder_plans::get_plans</a>()<span class="keyword"> const</span>
<a name="l00560"></a>00560 <span class="keyword"></span>{
<a name="l00561"></a>00561         <span class="keywordflow">return</span> <a class="code" href="classgenevalmag_1_1Builder__plans.html#a02c97bab7b3561f4dde009b974255dfe" title="Store all evaluation plans of the grammar. Saves index of plans_uniques vector. &amp;quot;ro&amp;quot;...">eval_plans</a>;
<a name="l00562"></a>00562 }
<a name="l00563"></a>00563 
<a name="l00567"></a><a class="code" href="classgenevalmag_1_1Builder__plans.html#ad5d96d5e07170749447ff69b3282cd3d">00567</a> <span class="keyword">const</span> vector &lt; Order_eval_eq &gt; &amp;<a class="code" href="classgenevalmag_1_1Builder__plans.html#ad5d96d5e07170749447ff69b3282cd3d">Builder_plans::get_plans_uniques</a>()<span class="keyword"> const</span>
<a name="l00568"></a>00568 <span class="keyword"></span>{
<a name="l00569"></a>00569         <span class="keywordflow">return</span> <a class="code" href="classgenevalmag_1_1Builder__plans.html#a9cb3fc77b164a22cf37a0ec3e8f78bf7">plans_uniques</a>;
<a name="l00570"></a>00570 }
<a name="l00571"></a>00571 
<a name="l00575"></a><a class="code" href="classgenevalmag_1_1Builder__plans.html#a011e4668e269c69022cae075075a0087">00575</a> <span class="keyword">const</span> map &lt; Key_plan_project, unsigned short &gt; &amp;<a class="code" href="classgenevalmag_1_1Builder__plans.html#a011e4668e269c69022cae075075a0087">Builder_plans::get_plans_project</a>()<span class="keyword"> const</span>
<a name="l00576"></a>00576 <span class="keyword"></span>{
<a name="l00577"></a>00577         <span class="keywordflow">return</span> <a class="code" href="classgenevalmag_1_1Builder__plans.html#ab353b4b6e3b9c72a8fb61ee376a4f76c" title="Store all evaluation plans projects of the grammar.Saves index of plans_project_uniques...">plans_project</a>;
<a name="l00578"></a>00578 }
<a name="l00579"></a>00579 
<a name="l00583"></a><a class="code" href="classgenevalmag_1_1Builder__plans.html#aa4f340be44a4b2592c8f5aaabf88305e">00583</a> <span class="keyword">const</span> vector &lt; Order_eval_eq &gt; &amp;<a class="code" href="classgenevalmag_1_1Builder__plans.html#aa4f340be44a4b2592c8f5aaabf88305e">Builder_plans::get_plans_project_uniques</a>()<span class="keyword"> const</span>
<a name="l00584"></a>00584 <span class="keyword"></span>{
<a name="l00585"></a>00585         <span class="keywordflow">return</span> <a class="code" href="classgenevalmag_1_1Builder__plans.html#a6a64fd58a3ce6c2f4b6c69df14ffee6e">plans_project_uniques</a>;
<a name="l00586"></a>00586 }
<a name="l00587"></a>00587 
<a name="l00591"></a><a class="code" href="classgenevalmag_1_1Builder__plans.html#a52157d41e3998900e61ab90eda9e4e91">00591</a> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> &amp;<a class="code" href="classgenevalmag_1_1Builder__plans.html#a52157d41e3998900e61ab90eda9e4e91">Builder_plans::get_init_order</a>()<span class="keyword"> const</span>
<a name="l00592"></a>00592 <span class="keyword"></span>{
<a name="l00593"></a>00593         <span class="keywordflow">return</span> <a class="code" href="classgenevalmag_1_1Builder__plans.html#abe50c9e30276ceaeea344f6a95f23db8" title="Store the initial evaluation order of the attributes of the initial symbol.">init_order_ag</a>;
<a name="l00594"></a>00594 }
<a name="l00595"></a>00595 
<a name="l00599"></a><a class="code" href="classgenevalmag_1_1Builder__plans.html#a7748b68109c6c6aa805bbd1886dd6029">00599</a> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classgenevalmag_1_1Builder__plans.html#a7748b68109c6c6aa805bbd1886dd6029">Builder_plans::get_index_plan</a>(<span class="keyword">const</span> map &lt; Key_plan, unsigned short &gt;::const_iterator it_plan)<span class="keyword"> const</span>
<a name="l00600"></a>00600 <span class="keyword"></span>{
<a name="l00601"></a>00601         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> res(0);
<a name="l00602"></a>00602 
<a name="l00603"></a>00603         map &lt; Key_plan, unsigned short &gt;::const_iterator first(<a class="code" href="classgenevalmag_1_1Builder__plans.html#a02c97bab7b3561f4dde009b974255dfe" title="Store all evaluation plans of the grammar. Saves index of plans_uniques vector. &amp;quot;ro&amp;quot;...">eval_plans</a>.begin());
<a name="l00604"></a>00604         map &lt; Key_plan, unsigned short &gt;::const_iterator last(<a class="code" href="classgenevalmag_1_1Builder__plans.html#a02c97bab7b3561f4dde009b974255dfe" title="Store all evaluation plans of the grammar. Saves index of plans_uniques vector. &amp;quot;ro&amp;quot;...">eval_plans</a>.end());
<a name="l00605"></a>00605 
<a name="l00606"></a>00606         <span class="keywordflow">while</span>(it_plan != first &amp;&amp; first != last)
<a name="l00607"></a>00607         {
<a name="l00608"></a>00608                 res++;
<a name="l00609"></a>00609                 first++;
<a name="l00610"></a>00610         }
<a name="l00611"></a>00611         <span class="keywordflow">return</span> res;
<a name="l00612"></a>00612 }
<a name="l00613"></a>00613 
<a name="l00618"></a><a class="code" href="classgenevalmag_1_1Builder__plans.html#a2aecc3840ac5d583959073e5d7657b34">00618</a> <span class="keyword">const</span> map &lt; Key_plan_project, unsigned short &gt;::const_iterator <a class="code" href="classgenevalmag_1_1Builder__plans.html#a2aecc3840ac5d583959073e5d7657b34">Builder_plans::get_plan_project</a>(<span class="keyword">const</span> <a class="code" href="structgenevalmag_1_1k__p__project.html">Key_plan_project</a> &amp;key)<span class="keyword"> const</span>
<a name="l00619"></a>00619 <span class="keyword"></span>{
<a name="l00620"></a>00620         <span class="keyword">const</span> map &lt; Key_plan_project, unsigned short &gt;::const_iterator it(<a class="code" href="classgenevalmag_1_1Builder__plans.html#ab353b4b6e3b9c72a8fb61ee376a4f76c" title="Store all evaluation plans projects of the grammar.Saves index of plans_project_uniques...">plans_project</a>.find(key));
<a name="l00621"></a>00621         assert(it != <a class="code" href="classgenevalmag_1_1Builder__plans.html#ab353b4b6e3b9c72a8fb61ee376a4f76c" title="Store all evaluation plans projects of the grammar.Saves index of plans_project_uniques...">plans_project</a>.end());
<a name="l00622"></a>00622         <span class="keywordflow">return</span> it;
<a name="l00623"></a>00623 }
<a name="l00624"></a>00624 
<a name="l00625"></a>00625 } <span class="comment">/* end genevalmag */</span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Sat Sep 4 15:19:11 2010 for maggen by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
