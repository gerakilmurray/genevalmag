\chapter{Acerca de \maggen}
\label{chap:acercamaggen}
\minitoc

\section{\textquestiondown Qué es \maggen?}
\maggen\ es una herramienta generadora de evaluadores estáticos para gramáticas atribuidas multiplanes (MAG). 

Esto es, dada una MAG en el lenguaje de especificación, \maggen\ computa los planes de evaluación y genera las distintas secuencias de visita para todos los posibles contextos. Estas secuencias, son codificadas en un archivo C++ junto con los algoritmos necesarios para evaluar cualquier AST perteneciente la gramática \textit{input} de \maggen.

El evaluador generado por \maggen\ recibe un \textbf{AST} y devuelve este \textbf{AST decorado}. El potencial del evaluador generado por \maggen, esta dado, por tener estáticamente todos las posibles secuencias de visita para los posibles \textbf{AST} de entrada, entonces sólo debe seleccionar las secuencias para el AST dado y luego recorrerlo según como las mismas lo indiquen.

\section{\textquestiondown Como funciona \maggen ?}
Dado una MAG, \maggen\ calcula los grafos de dependencias de atributos de los símbolos de la gramática. A partir de ellos, es posible la aplicación de algoritmos de para la obtención de planes de evaluación y luego secuencias de visitas de dichos planes. \maggen\ se basa en la construcción de 4 tipos de grafos, que se construyen de manera incremental sobre la gramática. Estos grafos, son los presentados en el capítulo \ref{chap:mag}, Dependency graph (\textbf{DP}), Down graph (\textbf{Down}), Downward Characteristic graph (\textbf{DCG}) y Augmented Dependency graph (\textbf{ADP}). Sobre estos últimos se basa el cálculo de los planes de evaluación.

El funcionamiento de \maggen\ esta dado por la integración de 4 etapas, consideradas principales, que marcaron el proceso de desarrollo de la herramienta:
\begin{itemize}
\item Lenguaje especificación de MAG.
\item Parser del lenguaje,representación interna y chequeos.
\item Construcción de grafos y aplicación de algoritmos de cómputo de planes y secuencias de visita.
\item Generación de código.
\end{itemize}

El cómputo de \maggen\ se realiza atravesando cada una de estas etapas secuencialmente, es decir, la terminación exitosa de una, habilita la siguiente; por lo tanto cada etapa mantiene su salida de errores de manera independiente. 

La salida normal de \maggen que indica que se han realizado todas las etapas correctamente, es la siguiente:

\vspace{0.3cm}
\begin{lstlisting}[backgroundcolor=\color{white}, language=]
   * Parsing grammar ---------- [  OK  ]
   * Generate graphs ---------- [  OK  ]
   * Build plans -------------- [  OK  ]
   * Build visit sequence ----- [  OK  ]
   * Generation code ---------- [  OK  ]

   Generation complete in: 0.372814 seconds.
\end{lstlisting}
\vspace{0.3cm}

En caso de funcionamiento anormal de alguna de las etapas, se detectará un \textbf{FAIL} en la etapa correspondiente y se indicará la información del mismo.

Un caso alternativo de salida, se da cuando \maggen\ detecta planes cíclicos, visualizándose un \textbf{ABORT} en la etapa de creación de planes:

\vspace{0.3cm}
\begin{lstlisting}[backgroundcolor=\color{white}, language=] 
   * Parsing grammar ---------- [  OK  ]
   * Generate graphs ---------- [  OK  ]
   * Build plans -------------- [ ABORT ]

   ERROR: One o more graph ADP has an cycle in its dependencies. Look the folder ./out_maggen/graphs/CYCLIC_graphs/ for more details.
\end{lstlisting}
\vspace{0.3cm}

\textit{Notar que, el mensaje de error indicará la ruta donde fueron almacenados los grafos con problemas de ciclicidad. En este ejemplo, la variable \texttt{path\_output}, fue seteada con un valor por defecto, pero el usuario puede proporcionar otra la ruta al momento del uso de la herramienta. Ver \ref{sec:uso-maggen} para más detalles.}\\

En el capítulo siguiente se abordarán detalles respecto al diseño de \maggen\ teniendo en cuenta cada una de las etapas, analizadas en esta sección.
